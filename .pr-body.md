<!--
SPDX-FileCopyrightText: 2025 SecPal
SPDX-License-Identifier: CC0-1.0
-->

## Overview

Migrates authentication from localStorage-based token storage to httpOnly cookies for XSS protection.

## Issue

Closes #210
Part of Epic #208 (httpOnly Cookie Authentication Migration)

## Changes

- **AuthContext**: Removed `token` state, updated `login()` signature to accept only `user`
- **authApi**: Added `credentials: 'include'` to all fetch calls, removed Authorization headers
- **logout/logoutAll**: Removed `token` parameter, now rely on httpOnly cookies
- **LoginResponse**: Removed `token` field from interface
- **storage.ts**: Deprecated token methods (getToken, setToken, removeToken)
- **Tests**: Updated all authentication tests (Header, Login, ProtectedRoute, useAuth, authApi)

## Security Improvement

✅ **Eliminates XSS attack vector**: httpOnly cookies cannot be accessed by JavaScript, preventing token theft via XSS attacks.

## Backend Dependencies

- ✅ api#209: Laravel Sanctum SPA configuration (merged)
- ✅ api#210: CSRF endpoint implementation (merged)

## Testing

- All 660 tests passing
- Test coverage: Maintained (≥80%)
- TypeScript: Strict mode passing
- ESLint: No warnings
- Build: Successful

## Acceptance Criteria

- [x] Client-side token storage completely removed from frontend
- [x] Authentication uses httpOnly cookies with `credentials: 'include'`
- [x] All authentication flows work with cookie-based auth
- [x] All tests updated and passing
- [x] No TypeScript errors
- [x] Security: JavaScript cannot access authentication tokens

## Review Focus

- Security: Verify no client-side token handling remains
- API calls: Confirm all auth endpoints use `credentials: 'include'`
- Tests: Verify test coverage matches new cookie-based pattern

## Next Steps (Subsequent PRs)

- Frontend PR-2: CSRF token implementation (#211)
- Frontend PR-3: Cookie security headers and error handling (#212)
